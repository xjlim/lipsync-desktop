<html>
<title>LipSync User Menu</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="index.css" />

<body>
  <img src="logo.jpg" width="120" height="60">

  <div class="w3-sidebar w3-bar-block w3-light-grey w3-card" style="width:130px">
    <h5 class="w3-bar-item">Menu</h5>
    <button class="w3-bar-item w3-button tablink" onclick="openTab(event, 'Home')">Home</button>
    <button class="w3-bar-item w3-button tablink" onclick="openTab(event, 'Calibration')">Calibration</button>

  </div>

  <div style="margin-left:180px">
    <div class="w3-padding">
      <h1>Welcome to the Lipsync User Menu </h1>
    </div>


    <div id="Home" class="w3-container tab" style="display:block">
      <h2>Cursor Settings</h2>
      <p id="upload-status" class="hidden">Uploading...</p>
      <div id="blink-container">
        <p>
          <label for="interval">
            <span>Cursor Speed: </span>
          </label>
          <!--   <input type="text" id="interval-input" name="interval" value="4"> -->
          1
          <input type="range" id="interval-input" name="interval" min="1" max="9" value="5" class="sliderbar" id="myRange">9
        </p>
        <h2>Pressure sensors</h2>
        <p>

          <label for="sip_threshold">
            <span>Sip threshold: </span>
          </label>
          <!--         <input type="text" id="sip_threshold" name="sip_threshold" value="0.5">
   -->0.25
          <input type="range" id="sip_threshold" name="interval" min="1" max="4" value="2" class="sliderbar" id="myRange">1
        </p>
        <p>
          <label for="puff_threshold">
            <span>Puff threshold: </span>
          </label>
          <!--         <input type="text" id="puff_threshold" name="puff_threshold" value="0.5">
   -->0.25
          <input type="range" id="puff_threshold" name="interval" min="1" max="4" value="2" class="sliderbar" id="myRange">1
        </p>
        <label for="longsip_duration">
          <span id="1">Threshold for long sip-puff: </span>
        </label>
        <!--         <input type="text" id="longsip_duration" name="longsip_duration" value="1">
   -->1
        <input type="range" id="longsip_duration" name="interval" min="1" max="5" value="1" class="sliderbar" id="myRange">5
        </p>
        <p>
          <label for="longpuff_duration">
            <span id="2">Threshold for long long sip-puff: </span>
          </label>
          <!--         <input type="text" id="longpuff_duration" name="longpuff_duration" value="5">
   -->6
          <input type="range" id="longpuff_duration" name="interval" min="6" max="9" value="6" class="sliderbar" id="myRange">10
        </p>

        <p>
          <span>
            <br>Reverse Sip and Puff: </span>
          <label class="switch">
            <input id="reversed" type="checkbox">

            <span class="slider round"></span>
          </label>
        </p>
        <p>
          <button id="flash-btn">Flash</button>
          <button id="reset-btn">Reset</button>
      </div>
    </div>
  </div>

  <div id="Calibration" class="w3-container tab" style="display:none">
    <div style="margin-left:180px">
      <p id="instruction">
        Move your mouse to the top left dot
      </p>
      <svg id="calibrate-container" width="300" height="300">
        <rect width="300" height="300" style="fill: #e2e2e2" />
        <rect id="one" x="30" y="30" width="10" height="10" style="fill: #0000ff" />
        <rect id="two" x="260" y="30" width="10" height="10" style="fill: #0000ff" />
        <rect id="four" x="30" y="260" width="10" height="10" style="fill: #0000ff" />
        <rect id="three" x="260" y="260" width="10" height="10" style="fill: #0000ff" />
        <polyline id="polyline" points="" stroke="orange" fill="transparent" stroke-width="3"></polyline>
      </svg>
    </div>


  </div>
  <div id="flash-modal" class="modal">
    <div class="modal-content">
      <div class="center">
        <p>Keep these Blink settings?</p>
        <p id="flash-countdown"></p>
        <button id="revert" class="modal-btn">Revert</button>
        <button id="keep" class="modal-btn">Keep changes</button>
      </div>
    </div>
  </div>

  <script>
    window.onload = function () {
      initTab = document.getElementsByClassName("tablink"); //inital tab is home in red
      initTab[0].className += " w3-red";

    }
    document.getElementById("reversed").addEventListener("change", rsip_puff);

    function rsip_puff() {
      var pre_st = document.getElementById("sip_threshold").value;
      var pre_pt = document.getElementById("puff_threshold").value;
      var pre_lsd = document.getElementById("longsip_duration").value;
      var pre_lpd = document.getElementById("longpuff_duration").value;

      if (document.getElementById("reversed").checked == true) {
        document.getElementById("sip_threshold").value = pre_pt;
        document.getElementById("puff_threshold").value = pre_st;
        // document.getElementById("longsip_duration").value = pre_lpd;
        //document.getElementById("longpuff_duration").value = pre_lsd;
        // document.getElementById("1").innerHTML =
      } else {
        document.getElementById("sip_threshold").value = pre_pt;
        document.getElementById("puff_threshold").value = pre_st;
        //document.getElementById("longsip_duration").value = pre_lpd;
        //document.getElementById("longpuff_duration").value = pre_lsd;

      }
    }

    function openTab(evt, tabName) {
      var i, x, tablinks;
      x = document.getElementsByClassName("tab");
      for (i = 0; i < x.length; i++) {
        x[i].style.display = "none";
      }
      tablinks = document.getElementsByClassName("tablink");
      for (i = 0; i < x.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" w3-red", "");
      }
      document.getElementById(tabName).style.display = "block";
      evt.currentTarget.className += " w3-red";
    }
  </script>

  <script>
    // You can also require other files to run in this process
    require('./renderer.js')
  </script>

</body>

</html>